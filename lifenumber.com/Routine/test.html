<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Routine Generator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }
    label {
        font-weight: bold;
    }
    input[type="number"] {
        width: 50px;
    }
    button {
        padding: 8px 16px;
        background-color: #007bff;
        color: #fff;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background-color: #0056b3;
    }
    table {
        border-collapse: collapse;
        margin-top: 20px;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
    th {
        background-color: #f2f2f2;
    }
</style>
</head>
<body>

<label for="numSections">Number of Sections:</label>
<input type="number" id="numSections" min="1" value="6">
<button onclick="generateRoutine()">Generate Routine</button>

<div id="routineOutput"></div>

<script>
function random(val) {
    return Math.floor(Math.random() * val);
}

function cls_ava(val, tch) {
    while (true) {
        const cls = random(val);
        if (tch[cls] === 0) {
            return cls;
        }
    }
}

function generateRoutine() {
    const numSections = parseInt(document.getElementById('numSections').value);
    const cls = 6;
    const day = 5;
    const teacher = [
        "Math",
        "Physics",
        "Chemistry",
        "Biology",
        "English",
        "History",
        "Computer Science",
        "Geography",
        "Art",
        "Music"
    ];

    const val = teacher.length;

    const routine = Array.from({ length: numSections }, () =>
        Array.from({ length: cls }, () =>
            Array.from({ length: cls }, () => "")
        )
    );

    const tch = Array(val).fill(0);

    for (let i = 0; i < numSections; i++) {
        for (let j = 0; j < day; j++) {
            for (let k = 0; k < cls; k++) {
                let cl_n = cls_ava(val, tch);

                if (tch[cl_n] === 0) {
                    tch[cl_n] = 1;
                } else {
                    console.log("yes it did");
                    cl_n = cls_ava(val, tch);
                }

                routine[k][j][i] = teacher[cl_n];
            }
            tch.fill(0);
        }
    }

    const routineOutput = document.getElementById('routineOutput');
    routineOutput.innerHTML = '<h2>Routine</h2>';
    for (let i = 0; i < numSections; i++) {
        routineOutput.innerHTML += `<h3>Section ${i + 1}</h3>`;
        const table = document.createElement('table');
        const thead = document.createElement('thead');
        const tbody = document.createElement('tbody');
        const headRow = document.createElement('tr');
        for (let j = 0; j < cls; j++) {
            const th = document.createElement('th');
            th.textContent = `Period ${j + 1}`;
            headRow.appendChild(th);
        }
        thead.appendChild(headRow);
        for (let j = 0; j < day; j++) {
            const tr = document.createElement('tr');
            for (let k = 0; k < cls; k++) {
                const td = document.createElement('td');
                td.textContent = routine[k][j][i];
                tr.appendChild(td);
            }
            tbody.appendChild(tr);
        }
        table.appendChild(thead);
        table.appendChild(tbody);
        routineOutput.appendChild(table);
    }
}
</script>

</body>
</html>
